# 📷 圖片功能使用指南

## 功能概述

MomsHero 現在支援圖片識別功能！用戶可以直接拍攝冰箱食材照片，系統會自動識別食材並提供食譜建議。

## 功能特色

### 🎯 智能食材識別
- 自動識別冰箱中的各種食材
- 評估食材的新鮮度和保存狀況
- 支援常見的蔬菜、肉類、蛋類等食材

### 🍳 實用食譜建議
- 根據識別到的食材提供 3 個料理建議
- 每個建議包含：料理名稱、主要食材、烹飪時間、難度等級
- 提供食材搭配和保存建議

### 📱 簡單易用
- 直接在 Line 中拍照上傳
- 支援多種圖片格式（JPG、PNG、GIF、BMP、WebP）
- 最大支援 10MB 圖片檔案

## 使用方法

### 1. 拍攝食材照片
- 打開冰箱，拍攝食材照片
- 確保光線充足，食材清晰可見
- 建議拍攝角度能清楚看到所有食材

### 2. 上傳到 Line Bot
- 在 Line 中選擇「圖片」功能
- 選擇剛才拍攝的照片
- 發送給 MomsHero Bot

### 3. 獲得食譜建議
- 系統會自動分析圖片中的食材
- 提供詳細的食材識別結果
- 推薦適合的料理方案

## 技術架構

### 核心元件
- **圖片處理器** (`image_processor.py`)
  - 使用 Google Gemini LLM 進行圖片分析
  - 智能食材識別和食譜生成
  - 支援多種圖片格式

### 處理流程
1. 用戶上傳圖片到 Line Bot
2. 系統下載圖片到暫存目錄
3. 使用 Gemini LLM 分析圖片內容
4. 生成食材識別和食譜建議
5. 回傳結果給用戶
6. 清理暫存檔案

### 提示詞設計
```
請分析這張冰箱食材圖片，並提供實用的食譜建議：

【食材識別】
- 列出所有可見的食材
- 估計食材的數量和狀態（新鮮度、保存狀況等）

【食譜建議】
- 根據識別到的食材，提供 3 個料理建議
- 每個建議包含：料理名稱、主要食材、預估烹飪時間、難度等級

【實用提示】
- 食材搭配建議
- 保存建議（如果食材需要特別處理）

請用繁體中文回答，格式要清楚易讀，重點是實用性。
如果圖片中沒有食材或無法識別，請說明並建議用戶重新拍攝。
```

## 支援的食材類型

### 🥬 蔬菜類
- 葉菜類：高麗菜、白菜、菠菜、空心菜、莧菜等
- 根莖類：胡蘿蔔、白蘿蔔、馬鈴薯、地瓜、洋蔥等
- 瓜果類：番茄、青椒、茄子、南瓜、小黃瓜等
- 菇類：香菇、金針菇、杏鮑菇、木耳等

### 🥩 肉類
- 豬肉、牛肉、雞肉、魚類、蝦類等

### 🥚 蛋類
- 雞蛋、鴨蛋等

### 🧈 其他
- 豆腐、豆芽、海帶、紫菜等

## 最佳實踐

### 📸 拍攝技巧
1. **光線充足**：確保冰箱內有足夠的光線
2. **角度適當**：選擇能清楚看到所有食材的角度
3. **避免反光**：注意避免玻璃反光影響識別
4. **食材清晰**：確保食材輪廓清晰可見

### 🍽️ 使用建議
1. **定期更新**：建議每次使用前重新拍攝
2. **食材整理**：將食材整理好再拍攝效果更佳
3. **多角度拍攝**：如果食材較多，可以分多次拍攝

## 錯誤處理

### 常見問題
1. **無法識別食材**
   - 檢查圖片是否清晰
   - 確保光線充足
   - 重新拍攝嘗試

2. **識別結果不準確**
   - 調整拍攝角度
   - 改善光線條件
   - 使用文字描述補充

3. **系統錯誤**
   - 檢查網路連接
   - 稍後重試
   - 改用文字輸入

## 技術限制

### 檔案限制
- 最大檔案大小：10MB
- 支援格式：JPG、JPEG、PNG、GIF、BMP、WebP

### 識別限制
- 需要清晰的食材影像
- 複雜背景可能影響識別準確度
- 包裝食材識別效果較差

## 測試方法

### 本地測試
```bash
# 執行圖片功能測試
python test_image.py

# 啟動應用程式
python app_llm.py

# 檢查健康狀態
curl http://localhost:5000/health
```

### 實際測試
1. 啟動應用程式
2. 使用 ngrok 建立外部連接
3. 在 Line 中測試圖片功能
4. 拍攝冰箱食材照片進行測試

## 未來改進

### 功能擴展
- 支援更多食材類型
- 增加營養分析功能
- 提供過敏原提醒

### 技術優化
- 提升識別準確度
- 優化處理速度
- 增加批量處理功能

---

## 📞 支援

如有問題或建議，請聯繫開發團隊或查看專案文件。 